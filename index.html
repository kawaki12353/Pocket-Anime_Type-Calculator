<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Fraquezas e Resistências</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f4f7;
  padding: 20px;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

.selectors {
  display: flex;
  gap: 10px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 30px;
}

select {
  padding: 10px;
  font-size: 16px;
  border-radius: 8px;
}

.section {
  background: #fff;
  border-radius: 12px;
  padding: 15px;
  margin-bottom: 20px;
}

.section h2 {
  font-size: 18px;
  margin-bottom: 10px;
}

.badges {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
}

.badge {
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  color: #fff;
  font-weight: bold;
}

.x4   { background: #b71c1c; }
.x2   { background: #d32f2f; }
.x1   { background: #9e9e9e; }
.x05  { background: #388e3c; }
.x025 { background: #1b5e20; }
.x0   { background: #6a1b9a; }
</style>
</head>

<body>

<h1>Calculadora de Fraquezas e Resistências</h1>

<div class="selectors">
  <select id="primary"></select>
  <select id="secondary"></select>
</div>

<div id="results"></div>

<script>
const elements = [
  'Neutral','Fighting','Fire','Water','Nature','Earth','Wind','Ice',
  'Lightning','Soul','Psychic','Poison','Light','Dark','Demon','Beast'
];

/*
  REGRA:
  chart[ATAQUE][DEFESA] = multiplicador
*/
const chart = {
  Neutral: {
    Earth: 0.5,
    Soul: 0
  },

  Fighting: {
    Ice: 2, Earth: 2, Neutral: 2,
    Psychic: 0.5, Wind: 0.5, Beast: 0.5, Light: 0.5,
    Soul: 0
  },

  Fire: {
    Nature: 2, Ice: 2, Beast: 2,
    Water: 0.5, Fire: 0.5, Wind: 0.5, Earth: 0.5
  },

  Water: {
    Fire: 2, Earth: 2,
    Nature: 0.5, Lightning: 0.5, Water: 0.5
  },

  Nature: {
    Water: 2, Earth: 2, Lightning: 2,
    Fire: 0.5, Nature: 0.5, Soul: 0.5, Demon: 0.5
  },

  Earth: {
    Fire: 2, Lightning: 2, Wind: 2, Poison: 2,
    Nature: 0.5, Water: 0.5, Fighting: 0.5
  },

  Wind: {
    Fire: 2, Fighting: 2,
    Earth: 0.5, Ice: 0.5, Lightning: 0.5
  },

  Ice: {
    Nature: 2, Wind: 2,
    Fire: 0.5, Ice: 0.5
  },

  Lightning: {
    Water: 2, Wind: 2, Beast: 2,
    Earth: 0.5, Nature: 0.5, Lightning: 0.5
  },

  Soul: {
    Psychic: 2, Soul: 2, Fighting: 2,
    Dark: 0.5, Demon: 0.5,
    Neutral: 0
  },

  Psychic: {
    Fighting: 2, Poison: 2,
    Psychic: 0.5, Psychic: 0.5, Beast: 0.5
  },

  Poison: {
    Nature: 2, Light: 2,
    Earth: 0.5, Soul: 0.5, Poison: 0.5, Beast: 0.5
  },

  Light: {
    Dark: 2, Demon: 2, Fighting: 2,
    Soul: 0.5, Light: 0.5
  },

  Dark: {
    Light: 2, Soul: 2, Psychic: 2,
    Demon: 0.5, Poison: 0.5, Fighting: 0.5, Dark: 0.5
  },

  Demon: {
    Soul: 2, Demon: 2,
    Psychic: 0.5, Light: 0.5
  },

  Beast: {
    Psychic: 2, Poison: 2, Dark: 2,
    Fighting: 0.5, Wind: 0.5, Fire: 0.5
  }
};

const primary   = document.getElementById('primary');
const secondary = document.getElementById('secondary');
const results   = document.getElementById('results');

function populate() {
  primary.innerHTML   = '<option value="">Primário</option>';
  secondary.innerHTML = '<option value="">Secundário</option>';

  elements.forEach(el => {
    primary.innerHTML   += `<option value="${el}">${el}</option>`;
    secondary.innerHTML += `<option value="${el}">${el}</option>`;
  });
}

function calculate() {
  const p = primary.value;
  const s = secondary.value;

  if (!p && !s) return;

  const damage = {};

  elements.forEach(atk => {
    let mult = 1;

    if (p && chart[atk]?.[p] !== undefined) {
      mult *= chart[atk][p];
    }

    if (s && chart[atk]?.[s] !== undefined) {
      mult *= chart[atk][s];
    }

    damage[atk] = mult;
  });

  render(damage);
}

function render(damage) {
  results.innerHTML = '';

  const groups = {
    'Fraqueza Extrema (x4)': 'x4',
    'Fraqueza (x2)': 'x2',
    'Dano Normal (x1)': 'x1',
    'Resistência (x0.5)': 'x05',
    'Super Resistência (x0.25)': 'x025',
    'Imune (x0)': 'x0'
  };

  const mapped = {
    x4: [], x2: [], x1: [],
    x05: [], x025: [], x0: []
  };

  for (const el in damage) {
    const v = damage[el];

    if (v === 0) mapped.x0.push(el);
    else if (v === 0.25) mapped.x025.push(el);
    else if (v === 0.5) mapped.x05.push(el);
    else if (v === 2) mapped.x2.push(el);
    else if (v === 4) mapped.x4.push(el);
    else mapped.x1.push(el);
  }

  for (const title in groups) {
    const key = groups[title];
    if (!mapped[key].length) continue;

    const section = document.createElement('div');
    section.className = 'section';
    section.innerHTML = `<h2>${title}</h2>`;

    const box = document.createElement('div');
    box.className = 'badges';

    mapped[key].forEach(el => {
      box.innerHTML += `<div class="badge ${key}">${el}</div>`;
    });

    section.appendChild(box);
    results.appendChild(section);
  }
}

primary.addEventListener('change', calculate);
secondary.addEventListener('change', calculate);

populate();
</script>

</body>
</html>
