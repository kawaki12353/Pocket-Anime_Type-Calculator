<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="menu.css">
<script src="menu.js" defer></script>

<title>Pocket Anime - Items</title>

<style>
body{
  font-family:Arial,sans-serif;
  background:#f2f4f7;
  padding:20px;
  margin:0;
}

.category-icon{
  width:18px;
  height:18px;
}

/* HEADER */
.header{
  position:relative;
  text-align:center;
  margin-bottom:30px;
}
.logo{width:220px;max-width:60vw}
.page-title{margin-top:15px;font-size:24px}

/* MOBILE */
@media (max-width:768px){
  .header{text-align:left;padding-top:10px}
  .logo{position:absolute;top:0;right:0;width:160px}
  .page-title{text-align:center;margin-top:70px}
}

/* FILTERS */
.filters{
  display:flex;
  gap:12px;
  justify-content:center;
  flex-wrap:wrap;
  margin-bottom:25px;
}
.filters input,.filters select{
  padding:10px 12px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
  font-weight:bold;
  background:#fff;
  color:#000;
}

/* CATEGORY FILTER */
.category-filter{
  background:#2b2b2b;
}

/* RARITY COLORS */
.rarity-default{background:#2b2b2b}
.rarity-comum{background:#616161}
.rarity-incomum{background:#2e7d32}
.rarity-raro{background:#0d47a1}
.rarity-epico{background:#6a1b9a}
.rarity-lendario{background:#f9a825}

/* ITEM LIST */
.item-list{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(230px,1fr));
  gap:15px;
}
.item{
  background:#fff;
  border-radius:12px;
  padding:12px;
  display:flex;
  align-items:center;
  gap:10px;
  cursor:pointer;
  border:3px solid transparent;
  transition:.15s;
}
.item:hover{
  transform:translateY(-4px);
  box-shadow:0 6px 15px rgba(0,0,0,.15);
}
.item img{width:48px;height:48px}

.comum{border-color:#9e9e9e}
.incomum{border-color:#2e7d32}
.raro{border-color:#0d47a1}
.epico{border-color:#6a1b9a}
.lendario{border-color:#f9a825}

/* MODAL */
.modal-bg{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:30;
}
.modal{
  background:#2b2b2b;
  color:#fff;
  width:90%;
  max-width:460px;
  border-radius:14px;
  padding:18px;
  border:4px solid;
}
.modal.comum{border-color:#9e9e9e}
.modal.incomum{border-color:#2e7d32}
.modal.raro{border-color:#0d47a1}
.modal.epico{border-color:#6a1b9a}
.modal.lendario{border-color:#f9a825}

.close{text-align:right}
.close button{
  background:#d32f2f;
  color:#fff;
  border:none;
  border-radius:6px;
  padding:6px 12px;
  cursor:pointer;
}

.modal h2{
  text-align:center;
  margin-bottom:15px;
}

.section{
  margin-bottom:12px;
}
.section-title{
  font-weight:bold;
  color:#ccc;
  margin-bottom:4px;
  position:relative;
}
.section-title::after{
  content:"â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”";
  display:block;
  color:#555;
  font-size:12px;
}

/* LANG */
.lang-toggle{
  position:fixed;
  bottom:10px;
  left:50%;
  transform:translateX(-50%);
}
.lang-toggle button{
  padding:8px 14px;
  border-radius:20px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}

/* CUSTOM SELECT */
.custom-select{
  position:relative;
  width:180px;
}

.select-btn{
  background:#fff;
  color:#000;
  padding:12px 14px;
  border-radius:12px;
  cursor:pointer;
  font-weight:bold;
  border:1px solid #444;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

.select-list{
  display:none;
  position:absolute;
  top:110%;
  left:0;
  width:100%;
  background:#fff;
  border-radius:12px;
  list-style:none;
  padding:6px;
  z-index:50;
  box-shadow:0 8px 18px rgba(0,0,0,.4);
}

.select-list li{
  padding:10px 12px;
  border-radius:8px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:8px;
  color:#000;
  font-weight:bold;
}

.select-list li:hover{
  background:#333;
}

/* RARITY COLORS */
.r-comum{background:#616161}
.r-incomum{background:#2e7d32}
.r-raro{background:#0d47a1}
.r-epico{background:#6a1b9a}
.r-lendario{background:#f9a825}

@media (prefers-color-scheme: dark) {

  body{
    background:#0f1115;
    color:#cfd3dc;
  }

  /* HEADER */
  .page-title{
    color:#ffffff;
  }

  /* FILTERS */
  .filters input,
  .filters select,
  .select-btn{
    background:#1a1d23;
    color:#ffffff;
    border-color:#444;
  }

  .select-list{
    background:#1a1d23;
    box-shadow:0 10px 30px rgba(0,0,0,.6);
  }

  .select-list li{
    color:#cfd3dc;
  }

  .select-list li:hover{
    background:#2a2e36;
  }

  /* ITEMS */
  .item{
    background:#1a1d23;
    color:#ffffff;
    box-shadow:0 10px 30px rgba(0,0,0,.6);
  }

  .item:hover{
    box-shadow:0 14px 35px rgba(0,0,0,.8);
  }

  /* MODAL */
  .modal{
    background:#1a1d23;
    color:#ffffff;
    box-shadow:0 10px 30px rgba(0,0,0,.6);
  }

  .section-title{
    color:#cfd3dc;
  }

  .section-title::after{
    color:#444;
  }
}

/* BOTÃƒO DE IDIOMA */

/* Modo claro */
body.light .lang-toggle button{
  background:#444;
  color:#fff;
}

/* Modo escuro */
body.dark .lang-toggle button{
  background:#fff;
  color:#000;
}

</style>
</head>

<body>

<div class="header">
  <img src="assets/Pocket-Anime-logo.png" class="logo">
  <h1 id="title" class="page-title"></h1>
</div>

<div class="filters">
  <input id="searchInput" type="text">
<div class="custom-select" id="categorySelect">
  <div class="select-btn" id="categoryBtn"></div>
  <ul class="select-list" id="categoryList"></ul>
</div>

<div class="custom-select" id="raritySelect">
  <div class="select-btn" id="rarityBtn"></div>
  <ul class="select-list" id="rarityList"></ul>
 </div>
</div>

<div class="item-list" id="itemList"></div>

<div class="modal-bg" id="modalBg" onclick="closeModal()">
  <div class="modal" id="modal" onclick="event.stopPropagation()">
    <div class="close">
      <button onclick="closeModal()" id="closeBtn"></button>
    </div>
    <h2 id="mName"></h2>

    <div class="section">
  <div class="section-title" id="lblDesc"></div>
  <div id="mDesc"></div>
</div>

   <div class="section" id="noteSection" style="display:none;">
  <div class="section-title" id="lblNote"></div>
  <div id="mNote"></div>
</div>

   <div class="section">
  <div class="section-title" id="lblDrop"></div>
  <div id="mDrop"></div>
</div>

   <div class="section">
  <div class="section-title" id="lblCat"></div>
  <div id="mCat"></div>
</div>
  </div>
</div>

<div class="lang-toggle">
  <button id="langBtn"></button>
</div>

<script src="items-data.js"></script>

<script>

let lang=localStorage.getItem("siteLang")||"pt";
const rarityOrder={comum:1,incomum:2,raro:3,epico:4,lendario:5};

const uiText={
 pt:{
  title:"Lista de Itens",
  search:"Pesquisar item...",
  allCat:"Todas as categorias",
  allRare:"Todas raridades",
  cats:[
   "Item de EvoluÃ§Ã£o","Item de Batalha","Item Chave",
   "Item de Status","Item MÃ©dico","Item Diverso","Item de Captura","Scroll de Habilidade"
  ],
  rares:["Comum","Incomum","Raro","Ã‰pico","LendÃ¡rio"],
  close:"Fechar",
  desc:"DescriÃ§Ã£o",
  note:"Nota",
  drop:"Onde Obter",
  cat:"Categoria",
  btn:"ðŸ‡§ðŸ‡· BR"
 },
 en:{
  title:"Item List",
  search:"Search item...",
  allCat:"All categories",
  allRare:"All rarities",
  cats:[
   "Evolution Item","Battle Item","Key Item",
   "Status Item","Medical Item","Miscellaneous Item","Capture Item","Skill Scroll" 
  ],
  rares:["Common","Uncommon","Rare","Epic","Legendary"],
  close:"Close",
  desc:"Description",
  note:"Note",
  drop:"How to obtain",
  cat:"Category",
  btn:"ðŸ‡ºðŸ‡¸ USA"
 }
};

const categoryKeys = [
  "evolution","battle","key","status","medical","misc","capture","scroll"
];

const categoryLabels = {
  pt: {
    evolution:"Item de EvoluÃ§Ã£o",
    battle:"Item de Batalha",
    key:"Item Chave",
    status:"Item de Status",
    medical:"Item MÃ©dico",
    misc:"Item Diverso",
    capture:"Item de Captura",
    scroll:"Scroll de Habilidade"
  },
  en: {
    evolution:"Evolution Item",
    battle:"Battle Item",
    key:"Key Item",
    status:"Status Item",
    medical:"Medical Item",
    misc:"Miscellaneous Item",
    capture:"Capture Item",
    scroll:"Skill Scroll"
  }
};

const categoryIcons = {
  all: "assets/icons_categories/all_categories_icon.png",
  evolution: "assets/icons_categories/evolution_item_icon.png",
  battle: "assets/icons_categories/battle_item_icon.png",
  key: "assets/icons_categories/key_item_icon.png",
  status: "assets/icons_categories/status_item_icon.png",
  medical: "assets/icons_categories/medical_item_icon.png",
  misc: "assets/icons_categories/miscellaneous_item_icon.png",
  capture: "assets/icons_categories/capture_item_icon.png",
  scroll: "assets/icons_categories/skill_scroll_icon.png"
};

const rarityLabels = {
  pt: {
    comum: "Comum",
    incomum: "Incomum",
    raro: "Raro",
    epico: "Ã‰pico",
    lendario: "LendÃ¡rio"
  },
  en: {
    comum: "Common",
    incomum: "Uncommon",
    raro: "Rare",
    epico: "Epic",
    lendario: "Legendary"
  }
};

function render(){
 const s=searchInput.value.toLowerCase();
 const c = selectedCategory;
 const r = selectedRarity;
 itemList.innerHTML="";
 items.slice().sort((a, b) => {
  const rDiff = rarityOrder[a.rarity] - rarityOrder[b.rarity];
  if (rDiff !== 0) return rDiff;

  return a[lang].name.localeCompare(b[lang].name);
})
 .forEach(i=>{
  const d=i[lang];
  if(s && !d.name.toLowerCase().includes(s))return;
  if(c && i.pt.cat !== c) return;
  if(r && i.rarity!==r)return;
  const div=document.createElement("div");
  div.className=`item ${i.rarity}`;
  const iconSrc = i.icon ? `assets/${i.icon}` : "assets/sem_icone.png";

div.innerHTML = `
  <img src="${iconSrc}" alt="${d.name}">
  <strong>${d.name}</strong>
`;
  div.onclick=()=>openModal(i);
  itemList.appendChild(div);
 });
}

function openModal(i){
  const d = i[lang];

  modal.className = `modal ${i.rarity}`;
  mName.textContent = d.name;
  mDesc.textContent = d.desc;
  mDrop.textContent = d.drop;
  mCat.textContent = categoryLabels[lang][i.pt.cat];

  // NOTE
  if(d.note){
    mNote.textContent = d.note;
    noteSection.style.display = "block";
  }else{
    mNote.textContent = "";
    noteSection.style.display = "none";
  }

  modalBg.style.display = "flex";
}
function closeModal(){modalBg.style.display="none"}

function updateLang(){
  title.textContent = uiText[lang].title;
  searchInput.placeholder = uiText[lang].search;
  closeBtn.textContent = uiText[lang].close;
  lblDesc.textContent = uiText[lang].desc;
  lblNote.textContent = uiText[lang].note;
  lblDrop.textContent = uiText[lang].drop;
  lblCat.textContent = uiText[lang].cat;
  langBtn.textContent = uiText[lang].btn;

  buildCategoryMenu();
  buildRarityMenu();
  
const text = selectedCategory
  ? categoryLabels[lang][selectedCategory]
  : uiText[lang].allCat;

if (selectedCategory) {
  categoryBtn.innerHTML = `
    <img src="${categoryIcons[selectedCategory]}" class="category-icon">
    ${text}
  `;
} else {
  categoryBtn.textContent = text; // sem Ã­cone
}

rarityBtn.textContent = selectedRarity
  ? rarityLabels[lang][selectedRarity]
  : uiText[lang].allRare;

rarityBtn.className = "select-btn";
if (selectedRarity) rarityBtn.classList.add("r-" + selectedRarity);
  
  render();
}

langBtn.onclick = () => {
  const scrollPos = window.scrollY;
  const searchValue = searchInput.value;
  const cat = selectedCategory;
  const rar = selectedRarity;

  lang = lang === "pt" ? "en" : "pt";
  localStorage.setItem("siteLang", lang);

  if (typeof updateMenuLang === "function") {
    updateMenuLang();
  }

  updateLang();

  searchInput.value = searchValue;
  selectedCategory = cat;
  selectedRarity = rar;

if (cat) {
  categoryBtn.innerHTML = `
    <img src="${categoryIcons[cat]}" class="category-icon">
    ${categoryLabels[lang][cat]}
  `;
} else {
  categoryBtn.textContent = uiText[lang].allCat;
}
  rarityBtn.textContent = rar ? rarityLabels[lang][rar] : uiText[lang].allRare;
  rarityBtn.className = "select-btn" + (rar ? " r-" + rar : "");

  render();
  window.scrollTo(0, scrollPos);
};

let selectedCategory = "";
let selectedRarity = "";

function buildCategoryMenu(){
  categoryList.innerHTML = `
  <li onclick="selectCategory('')">
    ${uiText[lang].allCat}
  </li>
`;

  categoryKeys.forEach(key=>{
    categoryList.innerHTML += `
      <li onclick="selectCategory('${key}')">
        <img src="${categoryIcons[key]}" class="category-icon">
        ${categoryLabels[lang][key]}
      </li>
    `;
  });
}

function buildRarityMenu(){
  rarityList.innerHTML = `<li onclick="selectRarity('')">${uiText[lang].allRare}</li>`;
  Object.keys(rarityOrder).forEach(r=>{
    rarityList.innerHTML += `
      <li class="r-${r}" onclick="selectRarity('${r}')">
  ${rarityLabels[lang][r]}
</li>
    `;
  });
}

function selectCategory(value){
  selectedCategory = value;

  const text = value ? categoryLabels[lang][value] : uiText[lang].allCat;

  if (value) {
    categoryBtn.innerHTML = `
      <img src="${categoryIcons[value]}" class="category-icon">
      ${text}
    `;
  } else {
    categoryBtn.textContent = text;
  }

  categoryList.style.display = "none";
  render();
}

function selectRarity(value){
  selectedRarity = value;

  rarityBtn.textContent = value
    ? rarityLabels[lang][value]
    : uiText[lang].allRare;

  rarityBtn.className = "select-btn";
  if (value) rarityBtn.classList.add("r-" + value);

  rarityList.style.display = "none";
  render();
}

categoryBtn.onclick = () => {
  categoryList.style.display =
    categoryList.style.display === "block" ? "none" : "block";
};

rarityBtn.onclick = () => {
  rarityList.style.display =
    rarityList.style.display === "block" ? "none" : "block";
};

document.addEventListener("click", e=>{
  if(!categorySelect.contains(e.target)) categoryList.style.display="none";
  if(!raritySelect.contains(e.target)) rarityList.style.display="none";
});

updateLang();

searchInput.addEventListener("input", () => {
  render();
});

function closeAllSelects(){
  categoryList.style.display = "none";
  rarityList.style.display = "none";
}

categoryBtn.onclick = (e) => {
  e.stopPropagation();
  const open = categoryList.style.display === "block";
  closeAllSelects();
  categoryList.style.display = open ? "none" : "block";
};

rarityBtn.onclick = (e) => {
  e.stopPropagation();
  const open = rarityList.style.display === "block";
  closeAllSelects();
  rarityList.style.display = open ? "none" : "block";
};

document.addEventListener("click", closeAllSelects);

localStorage.setItem("siteLang", lang);
updateMenuLang();

</script>

</body>
</html>
