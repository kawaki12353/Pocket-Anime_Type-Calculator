<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="menu.css">
<script src="menu.js" defer></script>

<title>Pocket Anime - Maps</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  padding: 20px;
  margin: 0;
}

/* COLORS */
:root{
  --bg: #f2f4f7;
  --card: #ffffff;
  --text: #111;
  --border: #ccc;
  --hover: #f1f1f1;

  --lang-btn: #ffffff;
  --lang-btn-bg: #444;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #0f1217;
    --card: #181c24;
    --text: #ffffff;
    --border: #2a2f3a;
    --hover: #232836;

    --lang-btn: #111;
    --lang-btn-bg: #ffffff;
  }
}

/* HEADER */
.header {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto 30px;
  gap: 12px;
}

.header-top {
  width: 100%;
  display: flex;
  justify-content: center;
}

.logo {
  width: 260px;
}

.map-title {
  flex: 1;
  text-align: center;
  margin-bottom: 12px;
  font-size: 20px;
  font-weight: bold;
}

.search-container {
  width: 100%;
  max-width: 500px;
}

.search-container input {
  width: 100%;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--border);
  font-size: 14px;
  background: var(--card);
  color: var(--text);
}

.map-list {
  max-width: 1200px;
  margin: 0 auto;
}

.map-item {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  margin-bottom: 12px;
  overflow: hidden;
}

.map-header {
  padding: 14px;
  cursor: pointer;
  font-weight: bold;
}

.map-header:hover {
  background: var(--hover);
}

/* MAP IMAGE */
.map-content {
  max-height: 0;
  display: flex;
  justify-content: center;
  overflow: hidden;
  transition: max-height 0.35s ease;
}

.map-content img {
  max-width: 900px;
  width: 100%;
  padding: 12px;
  border-radius: 12px;
}

/* ACTIVE */
.map-item.active .map-content {
  max-height: 1000px;
}

/* LANG BUTTON */
.lang-toggle {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
}

.lang-toggle button {
  padding: 8px 14px;
  border-radius: 20px;
  border: none;
  font-weight: bold;
  cursor: pointer;
  background: var(--lang-btn-bg);
  color: var(--lang-btn);
}

/* MOBILE LAYOUT */
@media (max-width: 768px) {

  .header {
    flex-direction: column;
    align-items: center;
  }

  .header-top {
    display: flex;
    justify-content: flex-end;
    width: 100%;
  }

  .logo {
    width: 150px;
  }

  .search-container {
    max-width: 320px;
  }

  .map-list {
    max-width: 420px;
  }

  .map-content img {
    max-width: 100%;
  }
}

@media (max-width: 600px) {
  .search-container {
    max-width: 240px;
  }
}

</style>
</head>

<body>

<div class="header">
 <div class="header-top">
  <img src="assets/Pocket-Anime-logo.png" class="logo">
</div>

<!-- TITLE -->
<h2 class="map-title" id="mapTitle"></h2>

<!-- SEARCH -->
<div class="search-container">
  <input type="text" id="searchInput" placeholder="Pesquisar mapa...">
</div>

<!-- MAP LIST -->
<div class="map-list" id="mapList"></div>

<div class="lang-toggle">
  <button id="langBtn"></button>
</div>

<script>
/* MAP CONFIG */
const maps = [
  { name: "Castle Maze", file: "castle_maze_map.png" },
  { name: "Highstar Base", file: "highstar_base_map.png" }
];

const MAP_PATH = "assets/maps/";

/* BUILD MAP LIST */
const mapList = document.getElementById("mapList");
const searchInput = document.getElementById("searchInput");
const langBtn = document.getElementById("langBtn");

function renderMaps(filter = "") {
  mapList.innerHTML = "";

  maps
    .filter(m => m.name.toLowerCase().includes(filter))
    .forEach(map => {
      const item = document.createElement("div");
      item.className = "map-item";

      item.innerHTML = `
        <div class="map-header">${map.name}</div>
        <div class="map-content">
          <img src="${MAP_PATH}${map.file}" alt="${map.name}">
        </div>
      `;

      item.querySelector(".map-header").onclick = () => {
        const isActive = item.classList.contains("active");

        document
          .querySelectorAll(".map-item")
          .forEach(i => i.classList.remove("active"));

        if (!isActive) {
          item.classList.add("active");
        }
      };

      mapList.appendChild(item);
    });
}

renderMaps();

/* SEARCH */
searchInput.addEventListener("input", () => {
  renderMaps(searchInput.value.toLowerCase());
});

/* LANGUAGE */
const texts = {
  pt: { btn: "ðŸ‡§ðŸ‡· PT", search: "Pesquisar mapa...", title:'Mapas de "Dungeons"' },
  en: { btn: "ðŸ‡ºðŸ‡¸ EN", search: "Search map...", title:'"Dungeons" Maps' }
};

let lang = localStorage.getItem("siteLang") || "pt";

function updateLang() {
  langBtn.textContent = texts[lang].btn;
  searchInput.placeholder = texts[lang].search;
  
  document.getElementById("mapTitle").textContent = texts[lang].title;
}

langBtn.onclick = () => {
  lang = lang === "pt" ? "en" : "pt";
  localStorage.setItem("siteLang", lang);
  updateLang();
    
if (typeof updateMenuLang === "function") {
    updateMenuLang();
  }
};

updateLang();
</script>

</body>
</html>
